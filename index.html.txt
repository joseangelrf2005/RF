<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Práctica: Don't vs Doesn't</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .sentence-part {
            transition: all 0.3s ease;
        }
        .feedback-correct {
            color: #22c55e; /* green-500 */
        }
        .feedback-incorrect {
            color: #ef4444; /* red-500 */
        }
        .btn-choice {
            transition: all 0.2s ease-in-out;
        }
        .btn-choice:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div id="quiz-container" class="bg-white w-full max-w-2xl rounded-2xl shadow-lg p-6 md:p-8 text-center">
        
        <div id="quiz-start">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">Práctica Interactiva</h1>
            <h2 class="text-xl md:text-2xl font-semibold text-sky-600 mb-6">Presente Simple: `don't` vs `doesn't`</h2>
            <p class="text-gray-600 mb-8">Selecciona la opción correcta para completar cada oración. ¡Vamos a practicar!</p>
            <button id="start-button" class="w-full bg-sky-600 text-white font-bold py-3 px-6 rounded-lg text-lg hover:bg-sky-700 transition-colors duration-300">
                Empezar Práctica
            </button>
        </div>
        
        <div id="quiz-main" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <p id="question-counter" class="text-sm font-semibold text-gray-500 bg-gray-100 rounded-full px-3 py-1"></p>
                <p id="score" class="text-sm font-semibold text-gray-500 bg-gray-100 rounded-full px-3 py-1">Puntaje: 0</p>
            </div>

            <div class="bg-gray-50 rounded-lg p-6 md:p-8 min-h-[120px] flex items-center justify-center mb-6">
                <p id="sentence" class="text-2xl md:text-3xl font-semibold text-gray-700 leading-relaxed">
                    <!-- Sentence will be loaded here -->
                </p>
            </div>
            
            <div id="choices" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <button data-choice="don't" class="btn-choice bg-blue-500 text-white font-bold text-xl py-4 px-5 rounded-lg hover:bg-blue-600">don't</button>
                <button data-choice="doesn't" class="btn-choice bg-pink-500 text-white font-bold text-xl py-4 px-5 rounded-lg hover:bg-pink-600">doesn't</button>
            </div>

            <div id="feedback-container" class="min-h-[3rem] flex items-center justify-center mb-4">
                 <p id="feedback" class="text-xl font-bold"></p>
            </div>

            <button id="next-button" class="w-full bg-gray-800 text-white font-bold py-3 px-6 rounded-lg text-lg hover:bg-gray-900 transition-colors duration-300 hidden">
                Siguiente
            </button>
        </div>
        
        <div id="quiz-end" class="hidden">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">¡Práctica Completada!</h1>
            <p class="text-lg text-gray-600 mb-6">Este fue tu resultado:</p>
            <div class="bg-sky-100 border-2 border-sky-500 rounded-lg py-6 px-4 mb-8">
                <p class="text-2xl font-bold text-sky-800">Puntaje Final</p>
                <p id="final-score" class="text-5xl font-bold text-sky-600 mt-2"></p>
            </div>
            <button id="restart-button" class="w-full bg-sky-600 text-white font-bold py-3 px-6 rounded-lg text-lg hover:bg-sky-700 transition-colors duration-300">
                Practicar de Nuevo
            </button>
        </div>

    </div>

    <script>
        // --- Preguntas del Quiz ---
        const questions = [
            { sentence: 'I ___ like vegetables.', answer: "don't" },
            { sentence: 'She ___ play the piano.', answer: "doesn't" },
            { sentence: 'They ___ live in this city.', answer: "don't" },
            { sentence: 'He ___ work on weekends.', answer: "doesn't" },
            { sentence: 'We ___ have a car.', answer: "don't" },
            { sentence: 'My brother ___ speak French.', answer: "doesn't" },
            { sentence: 'You ___ need to hurry.', answer: "don't" },
            { sentence: 'The cat ___ eat fish.', answer: "doesn't" },
            { sentence: 'My parents ___ watch TV.', answer: "don't" },
            { sentence: 'It ___ snow in summer here.', answer: "doesn't" },
        ];

        // --- Elementos del DOM ---
        const quizStart = document.getElementById('quiz-start');
        const quizMain = document.getElementById('quiz-main');
        const quizEnd = document.getElementById('quiz-end');

        const startButton = document.getElementById('start-button');
        const sentenceEl = document.getElementById('sentence');
        const choicesEl = document.getElementById('choices');
        const feedbackEl = document.getElementById('feedback');
        const nextButton = document.getElementById('next-button');
        const restartButton = document.getElementById('restart-button');
        
        const scoreEl = document.getElementById('score');
        const questionCounterEl = document.getElementById('question-counter');
        const finalScoreEl = document.getElementById('final-score');

        // --- Estado del Quiz ---
        let currentQuestionIndex = 0;
        let score = 0;
        let answered = false;

        // --- Funciones del Quiz ---

        function startQuiz() {
            quizStart.classList.add('hidden');
            quizMain.classList.remove('hidden');
            quizEnd.classList.add('hidden');
            
            currentQuestionIndex = 0;
            score = 0;
            answered = false;
            
            updateScore();
            showQuestion();
        }

        function showQuestion() {
            answered = false;
            const question = questions[currentQuestionIndex];
            const [part1, part2] = question.sentence.split('___');

            // Creamos la oración con un espacio para la respuesta
            sentenceEl.innerHTML = `
                <span class="sentence-part">${part1.trim()}</span>
                <span id="blank" class="inline-block bg-gray-200 rounded-md w-28 h-10 mx-2"></span>
                <span class="sentence-part">${part2.trim()}</span>
            `;

            feedbackEl.textContent = '';
            feedbackEl.className = 'text-xl font-bold';
            
            // Habilitar botones de elección
            choicesEl.querySelectorAll('button').forEach(button => {
                button.disabled = false;
                button.classList.remove('opacity-50', 'cursor-not-allowed');
            });
            nextButton.classList.add('hidden');
            
            questionCounterEl.textContent = `Pregunta ${currentQuestionIndex + 1} de ${questions.length}`;
        }

        function checkAnswer(userChoice) {
            if (answered) return;
            answered = true;
            
            const blankEl = document.getElementById('blank');
            const question = questions[currentQuestionIndex];
            const isCorrect = userChoice === question.answer;

            // Rellenar el espacio en blanco con la elección del usuario
            blankEl.textContent = userChoice;
            blankEl.classList.remove('bg-gray-200');

            if (isCorrect) {
                score++;
                feedbackEl.textContent = '¡Correcto!';
                feedbackEl.classList.add('feedback-correct');
                blankEl.classList.add('text-green-600', 'font-bold');
            } else {
                feedbackEl.textContent = `Incorrecto. La respuesta es "${question.answer}".`;
                feedbackEl.classList.add('feedback-incorrect');
                blankEl.classList.add('text-red-600', 'font-bold');
            }

            updateScore();
            
            // Deshabilitar botones de elección
            choicesEl.querySelectorAll('button').forEach(button => {
                button.disabled = true;
                button.classList.add('opacity-50', 'cursor-not-allowed');
            });

            nextButton.classList.remove('hidden');
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                endQuiz();
            }
        }
        
        function endQuiz() {
            quizMain.classList.add('hidden');
            quizEnd.classList.remove('hidden');
            finalScoreEl.textContent = `${score} / ${questions.length}`;
        }

        function updateScore() {
            scoreEl.textContent = `Puntaje: ${score}`;
        }

        // --- Event Listeners ---
        startButton.addEventListener('click', startQuiz);
        
        choicesEl.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                checkAnswer(e.target.dataset.choice);
            }
        });
        
        nextButton.addEventListener('click', nextQuestion);
        restartButton.addEventListener('click', startQuiz);

    </script>
</body>
</html>
